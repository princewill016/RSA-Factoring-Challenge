#!/usr/bin/env python3
import sys
import math

def find_factor(n):
    # Handle trivial cases
    if n < 4:
        return None
    
    # Check for even numbers first
    if n % 2 == 0:
        return (n // 2, 2)
    
    # Try odd numbers up to square root
    for i in range(3, int(math.sqrt(n)) + 1, 2):
        if n % i == 0:
            return (i, n // i)
    
    # If no factor found, return None
    return None

def main():
    # Check if filename is provided
    if len(sys.argv) < 2:
        print("Usage: factors <file>")
        sys.exit(1)
    
    # Read input file
    try:
        with open(sys.argv[1], 'r') as file:
            numbers = [int(line.strip()) for line in file]
    except FileNotFoundError:
        print(f"Error: File {sys.argv[1]} not found")
        sys.exit(1)
    except ValueError:
        print("Error: Invalid number in file")
        sys.exit(1)
    
    # Factorize and print results
    for num in numbers:
        factor = find_factor(num)
        if factor:
            print(f"{num}={factor[0]}*{factor[1]}")
        else:
            # Fallback if no factor found
            print(f"{num}={num}")

if __name__ == "__main__":
    main()
